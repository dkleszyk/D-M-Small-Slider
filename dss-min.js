// Licensed under The MIT License (MIT) <http://www.opensource.org/licenses/mit-license.php>
// Copyright (c) 2014 David J. Kleszyk
var dss=function(e){var t={dwell:5e3,ftl:!0,"new-slides":[],start:1,duration:750,direction:"right",autostart:!0,tween:function(e,t,n,r){return-n/2*(Math.cos(Math.PI*e/r)-1)+t}},n=function(e,t){var n=new RegExp(" "+t+" ","g");e.className=(" "+e.className+" ").replace(n,"").trim()},r=function(e,t){n(e,t),e.className=(e.className+" "+t).trim()},i=function(e,n){return typeof e!="undefined"&&typeof e[n]!="undefined"?e[n]:t[n]},s=function(e,t,n,r,i,s,o,u,a){function l(c){f===null&&(f=c);var h=c-f,p=e.call(null,h,s,o-s,u);h<u?(n&&(n.style[t]=p+"%"),i&&(i.style[r]=100-p+"%"),window.requestAnimationFrame(l)):(n&&(n.style[t]=o),i&&(i.style[r]=100-o+"%"),a&&a.call(null))}var f=null;window.requestAnimationFrame(l)};return e.slider=function(e,t){var o={lock:!1,dwell:i(t,"dwell"),currentSlide:i(t,"start")-1,duration:i(t,"duration"),direction:i(t,"direction"),firstToLast:2*!!i(t,"ftl")-1,tweenCb:i(t,"tween"),stop:function(){clearInterval(this.intervalTimer)},start:function(){var e=this;e.intervalTimer=setInterval(function(){e.slide(e.dir())},e.dwell)},restart:function(){this.stop(),this.start()}},u=i(t,"autostart"),a=i(t,"new-slides"),f=document.getElementById(e),l=f.getElementsByTagName("IMG"),c=f.getElementsByTagName("DT"),h=[],p=document.createElement("div"),d=f.clientWidth,v=f.clientHeight,m,g=document.createElement("A"),y=document.createElement("A"),b=l.length,w=["top","right","bottom","left","random"],E,S;if(f.nodeName.toUpperCase()!=="DL"||c.length+a.length<2||w.indexOf(o.direction)<0)return window.console&&console.error("Unable to create slider: "+e),!1;w.pop();for(E=0;E<b;E++)if(!l[E].complete)return!1;p.className="dss-c",f.parentNode.insertBefore(p,f),f.parentNode.removeChild(f),p.appendChild(f),S=f.style.height,f.style.height="1000em",m=f.offsetHeight/1e3,f.style.position="static",f.style.height=S,g.innerHTML="&lsaquo;",g.className="dss-ctrl prev",g.title="Previous",g.onclick=function(){o.restart(),o.slide(o.ndir(),-1)},p.appendChild(g),y.innerHTML="&rsaquo;",y.className="dss-ctrl next",y.title="Next",y.onclick=function(){o.restart(),o.slide(o.dir(),1)},p.appendChild(y),b=a.length;for(E=0;E<b;E++)S=document.createElement("DT"),S.innerHTML=a[E].content,f.appendChild(S),c[c.length]=S,S=document.createElement("DD"),S.innerHTML=a[E].caption,f.appendChild(S);b=c.length;for(E=0;E<b;E++){S=c[E],n(S,"on"),E===o.currentSlide&&r(S,"on"),h[E]=[];while(S.nextSibling&&(S.nextSibling.nodeName.toLowerCase()==="#text"||S.nextSibling.nodeName.toUpperCase()==="DD"))S=S.nextSibling,S.nodeName!=="#text"&&(n(S,"on"),E===o.currentSlide&&r(S,"on"),h[E].push(S))}return p.style.width=d/m+"em",p.style.height=v/m+"em",o.slide=function(e){if(this.lock)return;this.lock=!0;var t=this,i=arguments,o=t.firstToLast*(i.length===1?1:i[1]),u=t.currentSlide,a=c[u],f=h[u][0],l=u+o,p=w.indexOf(e);if(p<0)return;l<0&&(l=b-1),l>b-1&&(l=0);var d=c[l],v=h[l][0],m=w[(p+3)%4],g=w[(p+2)%4],y=w[(p+1)%4];d.style[g]="-100%",a.style[e]=a.style[m]=d.style[m]="0",a.style[y]=d.style[y]=a.style[g]=d.style[e]="",v.style.top="0",f.style.top=f.style.left=v.style.left="0",f.style.right=f.style.bottom=v.style.right=v.style.bottom="",r(d,"on"),n(f,"on"),s(t.tweenCb,e,a,g,d,0,100,t.duration,function(){n(a,"on"),r(v,"on"),t.currentSlide=l,t.lock=!1})},o.dir=function(){var e=this,t=w.indexOf(e.direction);return t<0?w[Math.floor(Math.random()*4)]:e.direction},o.ndir=function(){var e=this,t=w.indexOf(e.direction);return t<0?w[Math.floor(Math.random()*4)]:w[(t+2)%4]},u&&o.start(),o},e}(dss||{});
